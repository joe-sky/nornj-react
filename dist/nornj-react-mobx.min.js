/*!
* NornJ-React-Mobx v5.0.0-rc.9
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("nornj"),require("mobx"),require("mobx-react")):"function"==typeof define&&define.amd?define(["nornj","mobx","mobx-react"],t):t((e=e||self).NornJ,e.mobx,e.mobxReact)}(this,function(e,t,r){"use strict";var n,x=a(require("nornj")),j=a(require("react")),P=require("mobx"),o=(n=require("../../extensionConfig"))&&n.__esModule?n:{default:n},E=require("../../../lib/utils");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function _(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])<0&&(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=function(e){var t=e.component,r=e.directiveOptions,n=r.tagName,o=r.context.$this,a=r.props,i=e._value,u=e._action,c=_(e,["component","directiveOptions","_value","_action"]),l="value",f="onChange",s=x.default.getComponentConfig(n)||{},p=q(a&&a.arguments,"debounce");null!=s.valuePropName&&(l=s.valuePropName),null!=s.changeEventName&&(f=s.changeEventName);var v=i.value,d="select"===n&&c.multiple;(s.needToJS||d)&&(v=(0,P.toJS)(v));var m,g=c[f];if(p){var b=p.modifiers;m=(0,j.useRef)((0,E.debounce)(function(e){g.apply(o,e)},b&&+b[0]||100))}var O={};if(s.hasEventObject){var y=s.targetPropName||"value",h="input"===n&&"checkbox"===c.type;"input"===n&&"radio"===c.type?O.checked=c.value===v:h?O.checked=null!=v&&(x.default.isArrayLike(v)?0<=v.indexOf(c.value):v):O[l]=v,O[f]=function(e){e&&e.persist&&e.persist(),N(e.target[y],{target:e.target,value:i,args:arguments,changeEvent:g,action:u,valuePropName:l,emitChangeDebounced:m,isMultipleSelect:d,isCheckbox:h},o)}}else O[l]=v,O[f]=function(e){N(e,{value:i,args:arguments,changeEvent:g,action:u,valuePropName:l,emitChangeDebounced:m},o)};return j.default.createElement(t,function(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.forEach(function(e){var t,r,n;n=a[r=e],r in(t=o)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return o}({},c,O))};function N(e,t,r){var n=e;if(t.isMultipleSelect)n=x.default.arraySlice(t.target.options).filter(function(e){return e.selected}).map(function(e){return e.value});else if(t.isCheckbox){var o=t.value.value;n=x.default.isArrayLike(o)?(t.target.checked?o.push(e):o.splice(o.indexOf(e),1),o):t.target.checked}t.action?t.value.source["set".concat(x.default.capitalize(t.value.prop))](n,t.args):t.value.source[t.value.prop]=n,t.emitChangeDebounced?t.emitChangeDebounced.current(t.args):t.changeEvent&&t.changeEvent.apply(r,t.args)}function q(e,t){var r;return e&&e.every(function(e){return e.name!=t||(r=e,!1)}),r}(0,x.registerExtension)("mobxBind",function(e){var t=e.value();if(null==t)return t;var r=e.tagName,n=e.tagProps,o=e.props;(0,e.setTagName)(i),n.component=r,n.directiveOptions=e,n._value=t,n._action=q(o&&o.arguments,"action")},o.default.mobxBind),(0,x.registerExtension)("mstBind",function(e){var t=e.value();if(null==t)return t;var r=e.tagName,n=e.tagProps;(0,e.setTagName)(i),n.component=r,n.directiveOptions=e,n._value=t,n._action=!0},o.default.mstBind);var u=require("nornj"),c=s(require("react")),l=require("mobx-react-lite"),f=s(require("../../extensionConfig"));function s(e){return e&&e.__esModule?e:{default:e}}(0,u.registerExtension)("mobxObserver",function(e){return c.default.createElement(l.Observer,null,function(){return e.children()})},f.default.mobxObserver),e.registerComponent("mobx-Provider",r.Provider),e.registerFilter("toJS",function(e){return t.toJS(e)})});
